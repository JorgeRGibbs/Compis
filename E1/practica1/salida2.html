<!DOCTYPE html>
<html>
<head>
<title>theme</title>
<link rel="stylesheet" href="styles.css">
</head>
<body><span class="constant"> # </span><span class="ids"> include </span><span class="bitw"> < </span><span class="ids"> sys </span><span class="bitw"> / </span><span class="ids"> types </span><span class="bitw"> . </span><span class="ids"> h </span><span class="bitw"> > </span><br><span class="constant"> # </span><span class="ids"> include </span><span class="bitw"> < </span><span class="ids"> strings </span><span class="bitw"> . </span><span class="ids"> h </span><span class="bitw"> > </span><br><span class="constant"> # </span><span class="ids"> include </span><span class="bitw"> < </span><span class="ids"> string </span><span class="bitw"> . </span><span class="ids"> h </span><span class="bitw"> > </span><br><span class="constant"> # </span><span class="ids"> include </span><span class="bitw"> < </span><span class="ids"> unistd </span><span class="bitw"> . </span><span class="ids"> h </span><span class="bitw"> > </span><br><span class="constant"> # </span><span class="ids"> include </span><span class="bitw"> < </span><span class="ids"> stdlib </span><span class="bitw"> . </span><span class="ids"> h </span><span class="bitw"> > </span><br><span class="constant"> # </span><span class="ids"> include </span><span class="bitw"> < </span><span class="ids"> sys </span><span class="bitw"> / </span><span class="ids"> socket </span><span class="bitw"> . </span><span class="ids"> h </span><span class="bitw"> > </span><br><span class="constant"> # </span><span class="ids"> include </span><span class="bitw"> < </span><span class="ids"> netinet </span><span class="bitw"> / </span><span class="ids"> in </span><span class="bitw"> . </span><span class="ids"> h </span><span class="bitw"> > </span><br><span class="constant"> # </span><span class="ids"> include </span><span class="bitw"> < </span><span class="ids"> arpa </span><span class="bitw"> / </span><span class="ids"> inet </span><span class="bitw"> . </span><span class="ids"> h </span><span class="bitw"> > </span><br><span class="constant"> # </span><span class="ids"> include </span><span class="bitw"> < </span><span class="ids"> time </span><span class="bitw"> . </span><span class="ids"> h </span><span class="bitw"> > </span><br><span class="constant"> # </span><span class="ids"> include </span><span class="bitw"> < </span><span class="ids"> stdio </span><span class="bitw"> . </span><span class="ids"> h </span><span class="bitw"> > </span><br><br><span class="constant"> # </span><span class="ids"> define </span><span class="ids"> PORT </span><span class="dec"> 6000 </span><br><span class="constant"> # </span><span class="ids"> define </span><span class="ids"> GROUP </span><span class="stringliteral"> "239.0.0.1" </span><br><br><span class="int"> int </span><span class="ids"> main </span><span class="typicalsymbols"> ( </span><span class="int"> int </span><span class="ids"> argc </span><span class="typicalsymbols"> ) </span><br><span class="brackets"> { </span><br><span class="struct"> struct </span><span class="ids"> sockaddr_in </span><span class="ids"> addr </span><span class="ops"> ; </span><br><span class="int"> int </span><span class="ids"> addrlen </span><span class="typicalsymbols"> , </span><span class="ids"> sock </span><span class="typicalsymbols"> , </span><span class="ids"> cnt </span><span class="ops"> ; </span><br><span class="struct"> struct </span><span class="ids"> ip_mreq </span><span class="ids"> mreq </span><span class="ops"> ; </span><br><span class="char"> char </span><span class="ids"> message </span><span class="brackets"> [ </span><span class="dec"> 50 </span><span class="brackets"> ] </span><span class="ops"> ; </span><br><span class="char"> char </span><span class="ids"> msg </span><span class="brackets"> [ </span><span class="dec"> 80 </span><span class="brackets"> ] </span><span class="ops"> ; </span><br><br><span class="ids"> sock </span><span class="typicalsymbols"> = </span><span class="ids"> socket </span><span class="typicalsymbols"> ( </span><span class="ids"> AF_INET </span><span class="typicalsymbols"> , </span><span class="ids"> SOCK_DGRAM </span><span class="typicalsymbols"> , </span><span class="dec"> 0 </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><span class="if"> if </span><span class="typicalsymbols"> ( </span><span class="ids"> sock </span><span class="bitw"> < </span><span class="dec"> 0 </span><span class="typicalsymbols"> ) </span><span class="brackets"> { </span><br><span class="ids"> perror </span><span class="typicalsymbols"> ( </span><span class="stringliteral"> "socket" </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><span class="ids"> exit </span><span class="typicalsymbols"> ( </span><span class="dec"> 1 </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><span class="brackets"> } </span><br><span class="ids"> bzero </span><span class="typicalsymbols"> ( </span><span class="typicalsymbols"> ( </span><span class="char"> char </span><span class="bitw"> * </span><span class="typicalsymbols"> ) </span><span class="bitw"> & </span><span class="ids"> addr </span><span class="typicalsymbols"> , </span><span class="sizeof"> sizeof </span><span class="typicalsymbols"> ( </span><span class="ids"> addr </span><span class="typicalsymbols"> ) </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><span class="ids"> addr </span><span class="bitw"> . </span><span class="ids"> sin_family </span><span class="typicalsymbols"> = </span><span class="ids"> AF_INET </span><span class="ops"> ; </span><br><span class="ids"> addr </span><span class="bitw"> . </span><span class="ids"> sin_addr </span><span class="bitw"> . </span><span class="ids"> s_addr </span><span class="typicalsymbols"> = </span><span class="ids"> htonl </span><span class="typicalsymbols"> ( </span><span class="ids"> INADDR_ANY </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><span class="ids"> addr </span><span class="bitw"> . </span><span class="ids"> sin_port </span><span class="typicalsymbols"> = </span><span class="ids"> htons </span><span class="typicalsymbols"> ( </span><span class="ids"> PORT </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><span class="ids"> addrlen </span><span class="typicalsymbols"> = </span><span class="sizeof"> sizeof </span><span class="typicalsymbols"> ( </span><span class="ids"> addr </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><br><span class="if"> if </span><span class="typicalsymbols"> ( </span><span class="ids"> argc </span><span class="bitw"> > </span><span class="dec"> 1 </span><span class="typicalsymbols"> ) </span><span class="brackets"> { </span><br><span class="coment"> /* </span><span class="ids"> send </span><span class="bitw"> * </span><span class="bitw"> / </span><br><span class="ids"> addr </span><span class="bitw"> . </span><span class="ids"> sin_addr </span><span class="bitw"> . </span><span class="ids"> s_addr </span><span class="typicalsymbols"> = </span><span class="ids"> inet_addr </span><span class="typicalsymbols"> ( </span><span class="ids"> GROUP </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><span class="while"> while </span><span class="typicalsymbols"> ( </span><span class="dec"> 1 </span><span class="typicalsymbols"> ) </span><span class="brackets"> { </span><br><span class="bitw"> / </span><span class="bitw"> / </span><span class="ids"> time_t </span><span class="ids"> t </span><span class="typicalsymbols"> = </span><span class="ids"> time </span><span class="typicalsymbols"> ( </span><span class="dec"> 0 </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><span class="bitw"> / </span><span class="bitw"> / </span><span class="ids"> sprintf </span><span class="typicalsymbols"> ( </span><span class="ids"> message </span><span class="typicalsymbols"> , </span><span class="stringliteral"> "la hora es: %-24.24s" </span><span class="typicalsymbols"> , </span><span class="ids"> ctime </span><span class="typicalsymbols"> ( </span><span class="bitw"> & </span><span class="ids"> t </span><span class="typicalsymbols"> ) </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><span class="ids"> printf </span><span class="typicalsymbols"> ( </span><span class="stringliteral"> "Ingresa el mensaje:\n" </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><span class="ids"> gets </span><span class="typicalsymbols"> ( </span><span class="ids"> msg </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><span class="bitw"> / </span><span class="bitw"> / </span><span class="ids"> sprintf </span><span class="typicalsymbols"> ( </span><span class="ids"> message </span><span class="typicalsymbols"> , </span><span class="stringliteral"> "la hora es: %-24.24s" </span><span class="typicalsymbols"> , </span><span class="ids"> ctime </span><span class="typicalsymbols"> ( </span><span class="bitw"> & </span><span class="ids"> t </span><span class="typicalsymbols"> ) </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><span class="ids"> sprintf </span><span class="typicalsymbols"> ( </span><span class="ids"> message </span><span class="typicalsymbols"> , </span><span class="stringliteral"> "%s" </span><span class="typicalsymbols"> , </span><span class="ids"> msg </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><br><span class="ids"> printf </span><span class="typicalsymbols"> ( </span><span class="stringliteral"> "enviando: %s\n" </span><span class="typicalsymbols"> , </span><span class="ids"> message </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><span class="ids"> cnt </span><span class="typicalsymbols"> = </span><span class="ids"> sendto </span><span class="typicalsymbols"> ( </span><span class="ids"> sock </span><span class="typicalsymbols"> , </span><span class="ids"> message </span><span class="typicalsymbols"> , </span><span class="sizeof"> sizeof </span><span class="typicalsymbols"> ( </span><span class="ids"> message </span><span class="typicalsymbols"> ) </span><span class="typicalsymbols"> , </span><span class="dec"> 0 </span><span class="typicalsymbols"> , </span><br><span class="typicalsymbols"> ( </span><span class="struct"> struct </span><span class="ids"> sockaddr </span><span class="bitw"> * </span><span class="typicalsymbols"> ) </span><span class="bitw"> & </span><span class="ids"> addr </span><span class="typicalsymbols"> , </span><span class="ids"> addrlen </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><span class="if"> if </span><span class="typicalsymbols"> ( </span><span class="ids"> cnt </span><span class="bitw"> < </span><span class="dec"> 0 </span><span class="typicalsymbols"> ) </span><span class="brackets"> { </span><br><span class="ids"> perror </span><span class="typicalsymbols"> ( </span><span class="stringliteral"> "sendto" </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><span class="ids"> exit </span><span class="typicalsymbols"> ( </span><span class="dec"> 1 </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><span class="brackets"> } </span><br><span class="ids"> sleep </span><span class="typicalsymbols"> ( </span><span class="dec"> 5 </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><span class="brackets"> } </span><br><span class="brackets"> } </span><span class="else"> else </span><span class="brackets"> { </span><br><br><span class="coment"> /* </span><span class="ids"> receive </span><span class="bitw"> * </span><span class="bitw"> / </span><br><span class="if"> if </span><span class="typicalsymbols"> ( </span><span class="ids"> bind </span><span class="typicalsymbols"> ( </span><span class="ids"> sock </span><span class="typicalsymbols"> , </span><span class="typicalsymbols"> ( </span><span class="struct"> struct </span><span class="ids"> sockaddr </span><span class="bitw"> * </span><span class="typicalsymbols"> ) </span><span class="bitw"> & </span><span class="ids"> addr </span><span class="typicalsymbols"> , </span><span class="sizeof"> sizeof </span><span class="typicalsymbols"> ( </span><span class="ids"> addr </span><span class="typicalsymbols"> ) </span><span class="typicalsymbols"> ) </span><span class="bitw"> < </span><span class="dec"> 0 </span><span class="typicalsymbols"> ) </span><span class="brackets"> { </span><br><span class="ids"> perror </span><span class="typicalsymbols"> ( </span><span class="stringliteral"> "bind" </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><span class="ids"> exit </span><span class="typicalsymbols"> ( </span><span class="dec"> 1 </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><span class="brackets"> } </span><br><span class="ids"> mreq </span><span class="bitw"> . </span><span class="ids"> imr_multiaddr </span><span class="bitw"> . </span><span class="ids"> s_addr </span><span class="typicalsymbols"> = </span><span class="ids"> inet_addr </span><span class="typicalsymbols"> ( </span><span class="ids"> GROUP </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><span class="ids"> mreq </span><span class="bitw"> . </span><span class="ids"> imr_interface </span><span class="bitw"> . </span><span class="ids"> s_addr </span><span class="typicalsymbols"> = </span><span class="ids"> htonl </span><span class="typicalsymbols"> ( </span><span class="ids"> INADDR_ANY </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><span class="if"> if </span><span class="typicalsymbols"> ( </span><span class="ids"> setsockopt </span><span class="typicalsymbols"> ( </span><span class="ids"> sock </span><span class="typicalsymbols"> , </span><span class="ids"> IPPROTO_IP </span><span class="typicalsymbols"> , </span><span class="ids"> IP_ADD_MEMBERSHIP </span><span class="typicalsymbols"> , </span><br><span class="bitw"> & </span><span class="ids"> mreq </span><span class="typicalsymbols"> , </span><span class="sizeof"> sizeof </span><span class="typicalsymbols"> ( </span><span class="ids"> mreq </span><span class="typicalsymbols"> ) </span><span class="typicalsymbols"> ) </span><span class="bitw"> < </span><span class="dec"> 0 </span><span class="typicalsymbols"> ) </span><span class="brackets"> { </span><br><span class="ids"> perror </span><span class="typicalsymbols"> ( </span><span class="stringliteral"> "setsockopt mreq" </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><span class="ids"> exit </span><span class="typicalsymbols"> ( </span><span class="dec"> 1 </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><span class="brackets"> } </span><br><span class="while"> while </span><span class="typicalsymbols"> ( </span><span class="dec"> 1 </span><span class="typicalsymbols"> ) </span><span class="brackets"> { </span><br><span class="ids"> cnt </span><span class="typicalsymbols"> = </span><span class="ids"> recvfrom </span><span class="typicalsymbols"> ( </span><span class="ids"> sock </span><span class="typicalsymbols"> , </span><span class="ids"> message </span><span class="typicalsymbols"> , </span><span class="sizeof"> sizeof </span><span class="typicalsymbols"> ( </span><span class="ids"> message </span><span class="typicalsymbols"> ) </span><span class="typicalsymbols"> , </span><span class="dec"> 0 </span><span class="typicalsymbols"> , </span><br><span class="typicalsymbols"> ( </span><span class="struct"> struct </span><span class="ids"> sockaddr </span><span class="bitw"> * </span><span class="typicalsymbols"> ) </span><span class="bitw"> & </span><span class="ids"> addr </span><span class="typicalsymbols"> , </span><span class="bitw"> & </span><span class="ids"> addrlen </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><span class="if"> if </span><span class="typicalsymbols"> ( </span><span class="ids"> cnt </span><span class="bitw"> < </span><span class="dec"> 0 </span><span class="typicalsymbols"> ) </span><span class="brackets"> { </span><br><span class="ids"> perror </span><span class="typicalsymbols"> ( </span><span class="stringliteral"> "recvfrom" </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><span class="ids"> exit </span><span class="typicalsymbols"> ( </span><span class="dec"> 1 </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><span class="brackets"> } </span><span class="else"> else </span><span class="if"> if </span><span class="typicalsymbols"> ( </span><span class="ids"> cnt </span><span class="ops"> == </span><span class="dec"> 0 </span><span class="typicalsymbols"> ) </span><span class="brackets"> { </span><br><span class="break"> break </span><span class="ops"> ; </span><br><span class="brackets"> } </span><br><span class="ids"> printf </span><span class="typicalsymbols"> ( </span><span class="stringliteral"> "%s dice: = \"%s\"\n" </span><span class="typicalsymbols"> , </span><span class="ids"> inet_ntoa </span><span class="typicalsymbols"> ( </span><span class="ids"> addr </span><span class="bitw"> . </span><span class="ids"> sin_addr </span><span class="typicalsymbols"> ) </span><span class="typicalsymbols"> , </span><span class="ids"> message </span><span class="typicalsymbols"> ) </span><span class="ops"> ; </span><br><span class="brackets"> } </span><br><span class="brackets"> } </span><br><span class="brackets"> } </span><br>
</body>
</html>